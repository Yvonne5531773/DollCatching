var doblackhole=function(){function t(){var t="display: none;width:0;height:0;animation: rotates 15s linear infinite;-moz-animation: rotates 15s linear infinite; -webkit-animation: rotates 15s linear infinite;-ms-animation: rotates 15s linear infinite;-o-animation: rotates 15s linear infinite;position:fixed;z-index:999;";if(0===$(".ops-blackhole").length){var e='<style type="text/css">@-webkit-keyframes rotates{from{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@-ms-keyframes rotates{from{-ms-transform:rotate(0deg)}to{-ms-transform:rotate(360deg)}}@-moz-keyframes rotates{from{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(360deg)}}@-o-keyframes rotates{from{-o-transform:rotate(0deg)}to{-o-transform:rotate(360deg)}}</style>',i="<img src="+x+' class="ops-blackhole" style="'+t+"\"><img style='display:none' src="+k+' class="ops-close OP_LOG_BTN" data-click="{\'fm\':\'beha\'}" style="width:50px;height:50px;box-shadow:0px 0px 3px #000;position:fixed;top:100px;right:50px;z-index:305;cursor: pointer; display:none;">';i+=e,$(document.body).prepend(i)}else $(".ops-blackhole").attr("style",t)}function e(t){for(var e=0;e<_.length;++e){var i=_[e],o=V+i,n=t.css(i);t.data(o,n)}}function i(t){for(var e=0;e<_.length;++e){var i=_[e],o=V+i,n=t.data(o);t.css(i,n),t.removeData(o)}}function o(t,o,n){function s(){u.render()}var a=t+$(document).scrollLeft(),c=o+$(document).scrollTop();u=new g.ParticleSystem,u.init({particleComplete:function(t){t.$e.hide(),i(t.$e)},allComplete:function(){r(n)},x:a,y:c});var h=0;$(A).each(function(){if(!(P>=F)){var t=$(this),i=3-Math.floor(P/10);i<1&&(i=1),h+=i,++P,e(t);var o=t.offset(),n=a-o.left-t.width()/2,s=c-o.top-t.height()/2;u.emit(new g.Particle(t,new Vector2(n,s),h))}}),0==P&&r(),g.start(s)}function n(t,e){for(var i={},o=0;o<C.length;++o)i[C[o]+"transform"]=e;t.css(i)}function s(t,e){var i="scale("+e+","+e+")";n(t,i)}function r(t){a(t)}function a(t){$(".ops-blackhole").css({width:S+100,height:S}).animate({width:0,height:0,padding:0,left:$(window).width()/2,top:$(window).height()/2},1e3,function(){t(1)})}function c(t,e,i){$(".ops-blackhole").css({width:0,height:0,left:t,top:e}).show().animate({width:S+100,height:S,left:t-S/2,top:e-S/2},1e3,function(){o(t,e,i)})}function h(t){var e=$(window).width()/2,i=$(window).height()/2;c(e,i,t)}function d(){g.stop(),$(A).stop(!0).each(function(){var t=$(this);i(t),t.show()}),$(z).stop(!0),s($(z),1),$(z).show()}function l(t){function e(){o++,o==t.length&&n(i)}for(var i=[],o=0,n=function(){},t="object"!=typeof t?[t]:t,s=0;s<t.length;s++)i[s]=new Image,i[s].onload=function(){e()},i[s].onerror=function(){e()},i[s].src=t[s];return{done:function(t){n=t||n}}}function m(){P=0,q=0}function f(e){v.msie&&v.version<=9||(m(),t(),l([x,k]).done(function(t){h(e)}),$(".ops-close").bind("click",function(){p()}))}function p(){cancelAnimationFrame(w),$(".ops-blackhole").stop(!0).hide(),d()}!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var o=(new Date).getTime(),n=Math.max(0,16-(o-t)),s=window.setTimeout(function(){e(o+n)},n);return t=o+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var u,w,v=function(){function t(t){function i(e){var i=t.match(e);return i&&i.length>1&&i[1]||""}var o,n=i(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(t),r=!s&&/android/i.test(t),a=i(/version\/(\d+(\.\d+)?)/i),c=/tablet/i.test(t),h=!c&&/[^-]mobi/i.test(t);/opera|opr/i.test(t)?o={name:"Opera",opera:e,version:a||i(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(t)?o={name:"Windows Phone",windowsphone:e,msie:e,version:i(/iemobile\/(\d+(\.\d+)?)/i)}:/msie|trident/i.test(t)?o={name:"Internet Explorer",msie:e,version:i(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome|crios|crmo/i.test(t)?o={name:"Chrome",chrome:e,version:i(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:n?(o={name:"iphone"==n?"iPhone":"ipad"==n?"iPad":"iPod"},a&&(o.version=a)):/sailfish/i.test(t)?o={name:"Sailfish",sailfish:e,version:i(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?o={name:"SeaMonkey",seamonkey:e,version:i(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(t)?(o={name:"Firefox",firefox:e,version:i(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(o.firefoxos=e)):/silk/i.test(t)?o={name:"Amazon Silk",silk:e,version:i(/silk\/(\d+(\.\d+)?)/i)}:r?o={name:"Android",version:a}:/phantom/i.test(t)?o={name:"PhantomJS",phantom:e,version:i(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?o={name:"BlackBerry",blackberry:e,version:a||i(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(t)?(o={name:"WebOS",webos:e,version:a||i(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(o.touchpad=e)):o=/bada/i.test(t)?{name:"Bada",bada:e,version:i(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(t)?{name:"Tizen",tizen:e,version:i(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||a}:/safari/i.test(t)?{name:"Safari",safari:e,version:a}:{},/(apple)?webkit/i.test(t)?(o.name=o.name||"Webkit",o.webkit=e,!o.version&&a&&(o.version=a)):!o.opera&&/gecko\//i.test(t)&&(o.name=o.name||"Gecko",o.gecko=e,o.version=o.version||i(/gecko\/(\d+(\.\d+)?)/i)),r||o.silk?o.android=e:n&&(o[n]=e,o.ios=e);var d="";n?(d=i(/os (\d+([_\s]\d+)*) like mac os x/i),d=d.replace(/[_\s]/g,".")):r?d=i(/android[ \/-](\d+(\.\d+)*)/i):o.windowsphone?d=i(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o.webos?d=i(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?d=i(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?d=i(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(d=i(/tizen[\/\s](\d+(\.\d+)*)/i)),d&&(o.osversion=d);var l=d.split(".")[0];return c||"ipad"==n||r&&(3==l||4==l&&!h)||o.silk?o.tablet=e:(h||"iphone"==n||"ipod"==n||r||o.blackberry||o.webos||o.bada)&&(o.mobile=e),o.msie&&o.version>=10||o.chrome&&o.version>=20||o.firefox&&o.version>=20||o.safari&&o.version>=6||o.opera&&o.version>=10||o.ios&&o.osversion&&o.osversion.split(".")[0]>=6||o.blackberry&&o.version>=10.1?o.a=e:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6?o.c=e:o.x=e,o}var e=!0,i=t("undefined"!=typeof navigator?navigator.userAgent:"");return i._detect=t,i}(),b=302,y=303,g=function(){function t(t){r=t,s=!0,a=requestAnimationFrame(i)}function e(){s=!1,cancelAnimationFrame(a)}function i(){s&&(r&&r(),a=requestAnimationFrame(i))}function o(){function t(t){e.length>1&&(e[t]=e[e.length-1]),e.pop()}var e=new Array;this.particles=e;var i={particleComplete:null,allComplete:null};this.gravity=new Vector2(0,100),this.effectors=new Array;var o=S;this.init=function(t){t&&$.extend(i,t),o=S},this.emit=function(t){e.push(t)};var s=0;this.render=function(){++s;for(var r in e){var a=e[r];if(a&&a.startStep&&!(s<a.startStep)){s===a.startStep&&a.$e.css({position:"relative",zIndex:y});var c=i.x-o/2,h=i.y-o/2-$(document).scrollTop();$(".ops-blackhole").css({width:o+100,height:o,left:c,top:h,zIndex:b}),a.update();var d="scale("+a.scale+", "+a.scale+") ";d+="translate("+a.position.x/a.scale+"px, "+a.position.y/a.scale+"px)",n(a.$e,d),a.isReached()&&(i.particleComplete&&i.particleComplete(a),t(r),0===this.particles.length&&i.allComplete&&i.allComplete())}}}}var s,r,a;Vector2=function(t,e){this.x=t,this.y=e},Vector2.prototype={copy:function(){return new Vector2(this.x,this.y)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},sqrLength:function(){return this.x*this.x+this.y*this.y},normalize:function(){var t=1/this.length();return new Vector2(this.x*t,this.y*t)},negate:function(){return new Vector2((-this.x),(-this.y))},add:function(t){return new Vector2(this.x+t.x,this.y+t.y)},subtract:function(t){return new Vector2(this.x-t.x,this.y-t.y)},multiply:function(t){return new Vector2(this.x*t,this.y*t)},divide:function(t){var e=1/t;return new Vector2(this.x*e,this.y*e)},dot:function(t){return this.x*t.x+this.y*t.y}},Vector2.zero=new Vector2(0,0),Vector2.one=new Vector2(1,1);var c=0;Particle=function(t,e,i){this.id=c++,this.position=Vector2.zero,this.velocity=e,this.acceleration=Vector2.zero,this.age=0,this.life=1,this.size=5,this.$e=t,this.dst=e,this.startStep=i,this.scale=1,this.initDistance=this.dst.sqrLength(),this.distance=this.initDistance};var h=.02,d=1e5;Particle.prototype.update=function(){this.position=this.position.add(this.velocity.multiply(h)),this.velocity=this.velocity.add(this.acceleration.multiply(h)),this.isReached()&&(this.position=this.dst),this.distance=this.dst.subtract(this.position).sqrLength(),this.distance<=d&&(this.scale=this.distance/Math.min(d,this.initDistance),this.scale=Math.max(this.scale,.1),this.scale=Math.min(this.scale,1))},Particle.prototype.isReached=function(){return Math.abs(this.position.x)>=Math.abs(this.dst.x)&&Math.abs(this.position.y)>=Math.abs(this.dst.y)};var l={Vector2:Vector2,Particle:Particle,ParticleSystem:o,start:t,stop:e};return l}(),x="//act.cmcmcdn.com/upload/201710/c6e06e6fed16fc0b068b2711831ceeab.png",k="//bdaladdin.duapp.com/blackhole/img/close.png",z=".wrapper",A=".left_slidebar_con img, .top_warp img, .search_promotion img,.hot_box img, .s11_store_box img, .side_top_banner img, .fav-title-box img, .top_ad_tmall img",V="data-blackhole-",_=["position","z-index","top","left","width","height","transform","-webkit-transform","-moz-transform","-ms-transform","-o-transform"],F=200,P=0,q=0,C=["-ms-","-webkit-","-moz-","-o-",""],S=200,M={init:f,dispose:p};return M};