var svg_data='<?xml version="1.0" encoding="utf-8"?> <!-- Generator: Adobe Illustrator 20.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --> <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 800 600" style="enable-background:new 0 0 800 600;" xml:space="preserve"> <path d="M556,320.4c-9.4-22.3-22.7-41.3-39.9-56.9c-17.2-15.6-37.4-27.3-60.5-35.1c-23.1-7.8-48.1-11.7-75-11.7 c-2.7,0-5.8,0.1-9.3,0.4c-3.5,0.3-7.1,0.4-10.9,0.4c-4.3,0.5-8.6,0.8-12.9,0.8V109.4h201.7V11h-10v88.4H337.5v128.9h10 c4.5,0,9.1-0.3,13.5-0.8c3.9,0,7.6-0.2,11.1-0.4c3.2-0.2,6.1-0.4,8.5-0.4c25.7,0,49.8,3.8,71.8,11.2c21.7,7.3,40.9,18.4,57,33 c16,14.5,28.6,32.5,37.4,53.4c8.8,21,13.3,44.5,13.3,69.9c0,30-5.6,56.6-16.7,79.1c-11.1,22.5-26.5,41.6-45.6,56.7 c-19.4,15.3-42.2,27.1-67.8,35c-25.8,8-53.9,12.1-83.4,12.1c-11.2,0-23.4-1.2-36.2-3.5c-13-2.3-26.1-5.3-38.7-8.7 c-12.6-3.4-24.3-7.2-34.9-11.4c-6.9-2.7-13.2-5.3-18.7-7.8l26.2-65c8.9,4.2,20.1,8.6,34,13.3c20,6.8,41.3,10.2,63.3,10.2 c18.6,0,36.1-2.3,52-6.8c16.1-4.6,30.3-11.4,42.3-20.1c12.2-8.9,21.9-20.1,28.8-33.3c6.9-13.2,10.4-28.4,10.4-45 c0-32.8-13.2-59-39.2-77.9c-25-18.1-62.4-27.3-111.2-27.3c-5.9,0-12.8,0.1-20.9,0.4c-7.9,0.3-15.5,0.7-22.6,1.2 c-4.6,0.3-9.4,0.5-14.3,0.7V11h-10v295.3c8.6,0,16.9-0.3,25-0.8c7-0.5,14.4-0.9,22.2-1.2c7.8-0.3,14.7-0.4,20.6-0.4 c46.8,0,81.9,8.5,105.3,25.4c23.4,16.9,35.1,40.2,35.1,69.8c0,15.1-3.1,28.5-9.3,40.3c-6.2,11.8-14.8,21.8-25.8,29.9 c-11,8.1-24.1,14.3-39.1,18.6c-15.1,4.3-31.5,6.5-49.2,6.5c-21,0-41-3.2-60.1-9.7c-19.1-6.5-33.2-12.4-42.4-17.8l-33.9,83.9 c7.5,3.8,16.8,7.8,27.8,12.1c11,4.3,23,8.2,35.9,11.7s26.1,6.5,39.5,8.9c13.4,2.4,26.1,3.6,37.9,3.6c30.7,0,59.4-4.2,86.3-12.5 c26.9-8.3,50.6-20.6,71-36.7c20.4-16.1,36.6-36.2,48.4-60.1c11.8-23.9,17.8-51.8,17.8-83.5C570.2,367.4,565.4,342.8,556,320.4z"/> </svg>',DC=DC||{};DC["do"]=function(){var e=Matter.Engine,r=Matter.Render,t=Matter.Runner,n=Matter.Body,a=Matter.Composite,o=Matter.Composites,c=Matter.Common,i=Matter.Constraint,d=Matter.MouseConstraint,l=Matter.Mouse,s=Matter.World,m=Matter.Events,u=Matter.Bodies,f=(Matter.Vertices,Matter.Svg,Matter.Query);Matter.Sleeping;DC["do"].createStacks=function(e){return o.stack(e.x,e.y,e.columns,e.rows,0,0,function(e,r){return c.random()<.05?u.rectangle(e+15*c.random(),r+15*c.random(),26,16,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:sourceLinkRoot+"img/double11_1.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.05&&c.random()<.1?u.rectangle(e+15*c.random(),r+30*c.random(),24,24,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:"//act.cmcmcdn.com/upload/201710/f8e6bdd1572a5e8a2e2f73d8c52b1bf6.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.1&&c.random()<.15?u.rectangle(e+15*c.random(),r+15*c.random(),22,30,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:sourceLinkRoot+"img/red.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.15&&c.random()<.2?u.rectangle(e+15*c.random(),r+15*c.random(),24,24,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:sourceLinkRoot+"img/gift.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.2&&c.random()<.25?u.circle(e+15*c.random(),r+5*c.random(),16,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:sourceLinkRoot+"img/coin.png"}},friction:.7,timeScale:b}):c.random()>.25&&c.random()<.3?u.circle(e+15*c.random(),r+10*c.random(),12,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:sourceLinkRoot+"img/duck.png"}},friction:.7,timeScale:b}):c.random()>.3&&c.random()<.35?u.circle(e+15*c.random(),r+5*c.random(),16,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:"//act.cmcmcdn.com/upload/201710/bd2bd1fb94a20ca2f9eea1088925050a.png"}},friction:.7,timeScale:b}):c.random()>.35&&c.random()<.4?u.rectangle(e+15*c.random(),r+15*c.random(),28,38,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:"//act.cmcmcdn.com/upload/201710/24af186e46de0d872942ef2709f83b71.gif"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.4&&c.random()<.45?u.rectangle(e+15*c.random(),r+45*c.random(),38,18,{render:{sprite:{xScale:.5-x,yScale:.5-x,texture:"//act.cmcmcdn.com/upload/201710/2a126249ff498557a38cc920a64481c7.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.45&&c.random()<.5?u.rectangle(e+15*c.random(),r+40*c.random(),28,23,{render:{sprite:{xScale:.7-x,yScale:.7-x,texture:sourceLinkRoot+"img/10.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.5&&c.random()<.55?u.rectangle(e+15*c.random(),r+32*c.random(),38,23,{render:{sprite:{xScale:.7-x,yScale:.7-x,texture:sourceLinkRoot+"img/500.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.55&&c.random()<.6?u.rectangle(e+15*c.random(),r+44*c.random(),38,23,{render:{sprite:{xScale:.7-x,yScale:.7-x,texture:sourceLinkRoot+"/img/100.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.6&&c.random()<.65?u.rectangle(e+15*c.random(),r+21*c.random(),63,23,{render:{sprite:{xScale:.7-x,yScale:.7-x,texture:sourceLinkRoot+"/img/10000.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.65&&c.random()<.7?u.rectangle(e+15*c.random(),r+29*c.random(),28,23,{render:{sprite:{xScale:.7-x,yScale:.7-x,texture:sourceLinkRoot+"/img/50.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.7&&c.random()<.75?u.rectangle(e+15*c.random(),r+15*c.random(),28,28,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:"//act.cmcmcdn.com/upload/201710/25cd325bae7818e30a4d4676ec0880bf.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.75&&c.random()<.8?u.rectangle(e+15*c.random(),r+15*c.random(),28,28,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:"//act.cmcmcdn.com/upload/201710/c1fede413fbd7b3de23a771472e67d29.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.8&&c.random()<.85?u.rectangle(e+15*c.random(),r+15*c.random(),28,28,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:"//act.cmcmcdn.com/upload/201710/9de67782c268517089e6d031af85405c.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.85&&c.random()<.9?u.rectangle(e+15*c.random(),r+15*c.random(),28,28,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:"//act.cmcmcdn.com/upload/201710/45991158829180f3a86597a0ef781c3a.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):c.random()>.95&&c.random()<1?u.rectangle(e+15*c.random(),r+15*c.random(),28,28,{render:{sprite:{xScale:.8-x,yScale:.8-x,texture:"//act.cmcmcdn.com/upload/201710/328c7178f239ce35264850419510b3be.png"}},chamfer:{radius:5},friction:.7,timeScale:b}):u.circle(e+15*c.random(),r+15*c.random(),16,{render:{sprite:{xScale:.7-x,yScale:.7-x,texture:sourceLinkRoot+"img/liebao.png"}},friction:.7,timeScale:b})})};var p=!1,g=!1,x=.1,b=.8,S=e.create({}),y=S.world,h=r.create({element:document.body,engine:S,options:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,background:"transparent",showAngleIndicator:!1,wireframes:!1}});r.run(h);var v=t.create();t.run(v,S);var k={isStatic:!0,background:"transparent",render:{fillStyle:"#f84851"}};y.bodies=[],$("#d-c").css("min-width",document.documentElement.clientWidth);var A=document.documentElement.clientWidth,w=40,M=.01,R=u.rectangle(0,600,3*A,M,k),B=u.rectangle(0,0,3*A,M,k),C=u.rectangle(.13*-A+w,300,M,620,k),T=u.rectangle(.6*A+w,300,M,620,k);s.add(y,[R,C,T]);var L,E=!1,_=function(){return E?(!playAgain&&$("#switch1").prop("checked",!1),void(playAgain&&$("#switch1").prop("checked",!0))):(g=!1,E=!0,j.length=280,void setTimeout(function(){q=!0,setTimeout(function(){j.length=10,setTimeout(function(){$(".simpleAlert").length>0||(L=simpleAlert({content:"游戏结束啦！",buttons:{"再玩一次":function(){playAgain=!0,$("#switch1").prop("checked",!0),L.close()},"退出":function(){L.close(),s.clear(y),$("#d-c").remove(),bhObj.dispose()}}}))},3*timeout)},3*timeout)},timeout))};$(".start-btn").click(_);var F=0,P={x:180,y:350,columns:12,rows:1};setInterval(function(){if(F++,!(F>3)){var e=DC["do"].createStacks(P);s.add(y,e),P.x*=.5,P.columns+=6,P.rows+=1}},.8*timeout),setTimeout(function(){D(S),setTimeout(function(){s.add(y,[W,I,Q,B]),$(".start-btn").css("display","block"),p=!0,setTimeout(function(){g=!0},timeout)},3*timeout)},3*timeout);var D=function(e,r){if(r){var t=.0025*r.mass;n.applyForce(r,r.position,{x:(t+c.random()*t)*c.choose([1,-1]),y:-t+c.random()*-t})}else for(var o=a.allBodies(e.world),i=0;i<o.length;i++){var d=o[i];if(!d.isStatic&&d.position.y>=100){var l=.05*d.mass;n.applyForce(d,d.position,{x:(l+c.random()*l)*c.choose([1,-1]),y:-l+c.random()*-l})}}},G=400,O=n.nextGroup(!0),V=-1,W=o.stack(G,0,2,1,0,10,function(e,r){return u.rectangle(e,r,30,15,{label:"component",collisionFilter:{group:O},chamfer:.5,render:{sprite:{xScale:.6,yScale:.6,texture:sourceLinkRoot+"img/component.png"}}})}),H=u.rectangle(400,100,40,25,{label:"arm",render:{strokeStyle:"#3c3f41",sprite:{xScale:.8,yScale:.8,texture:sourceLinkRoot+"img/arm.png"}}});W.bodies.push(H),o.chain(W,.5,0,-.5,0,{stiffness:1,length:0,render:{visible:!1}}),a.add(W,i.create({label:"spring",bodyB:W.bodies[0],pointB:{x:-20,y:0},pointA:{x:W.bodies[0].position.x,y:W.bodies[0].position.y},stiffness:.01,damping:1,length:10,render:{visible:!0,lineWidth:1.5,strokeStyle:"#29a3f1"}}));var I,U=[],j=W.constraints[2];c.choose(["#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58"]);I=DC["do"].ragdoll(400,100,1.1,{},U);var z,Q=i.create({bodyA:W.bodies[W.bodies.length-1],bodyB:I.bodies[0],pointA:{x:28,y:0},pointB:{x:0,y:-7},length:0,render:{visible:!1}}),q=!1,J=.5,K=-.5,N=3.5,X=-3.5,Y=j.pointA.x;m.on(S,"beforeUpdate",function(e){if(I&&!(I.length<=0)&&(q?(playAgain?(N+=.03,X-=.03,J+=.01,K-=.01,N>=3.5&&(N=3.5,X=-3.5),J>=.5&&(J=.5,K=-.5,q=!1,g=!0,playAgain=!1,E=!1)):(N-=.02,X+=.02,J-=.01,K+=.01,N<=1.2&&(N=1.2,X=-1.2),J<=-.95&&(J=-.95,K=.95)),n.setAngle(I.bodies[1],J),n.setAngle(I.bodies[2],N),n.setAngle(I.bodies[3],K),n.setAngle(I.bodies[4],X)):(n.setAngle(I.bodies[1],.5),n.setAngle(I.bodies[2],3.3),n.setAngle(I.bodies[3],-.5),n.setAngle(I.bodies[4],-3.3)),g)){if(V+=.015,V<0)return;z=Y+250*Math.sin(V),!E&&(j.pointA.x=z)}}),m.on(h,"afterRender",function(){if(p){var e=ee.mouse,t=h.context,n=a.allBodies(S.world),o={x:400,y:100},c=e.position,i=f.ray(n,o,c);r.startViewTransform(h),t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(c.x,c.y),i.length>0?t.strokeStyle="#fff":t.strokeStyle="#555";for(var d=0;d<i.length;d++){var l=i[d];l&&!~["chest","left-arm","right-arm","right-lower-arm","left-lower-arm","component","arm","spring"].indexOf(l.body.label)&&l.body.position.y>=450&&D(S,l.bodyA)}r.endViewTransform(h)}});var Z=l.create(h.canvas),ee=d.create(S,{mouse:Z,constraint:{stiffness:1,render:{visible:!1}}});return m.on(ee,"mouseup",function(e){p&&($("#switch1").prop("checked",!1),_())}),h.mouse=Z,r.lookAt(h,{min:{x:0,y:0},max:{x:800,y:600}}),$(".d-c-close").click(function(){s.clear(y),$("#d-c").remove(),bhObj.dispose()}),{engine:S,runner:v,render:h,canvas:h.canvas,stop:function(){Matter.Render.stop(h),Matter.Runner.stop(v)}}},DC["do"].ragdoll=function(e,r,t,n,a){t="undefined"==typeof t?1:t;var o=Matter.Body,c=Matter.Bodies,i=Matter.Constraint,d=Matter.Composite,l=Matter.Common,s=l.extend({label:"chest",collisionFilter:{group:o.nextGroup(!0)},chamfer:{radius:[10*t,10*t,16*t,16*t]},render:{sprite:{xScale:.7,yScale:.7,texture:sourceLinkRoot+"img/chest.png"}}},n),m=l.extend({label:"left-arm",collisionFilter:{group:o.nextGroup(!0)},chamfer:{radius:10*t},render:{fillStyle:"#bdbabb"},stiffness:.8},n),u=l.extend({},m,{label:"left-lower-arm",render:{fillStyle:"#cfcdd2"},chamfer:{radius:6*t},friction:.7}),f=l.extend({label:"right-arm",collisionFilter:{group:o.nextGroup(!0)},chamfer:{radius:10*t},render:{fillStyle:"#bdbabb"},stiffness:.8},n),p=l.extend({},f,{label:"right-lower-arm",render:{fillStyle:"#cfcdd2"},chamfer:{radius:6*t},friction:.7}),g=c.rectangle(e,r,45*t,30*t,s),x=c.rectangle(e+39*t,r-15*t,17*t,54*t,f),b=c.rectangle(e+39*t,r+25*t,14*t,86*t,p),S=c.rectangle(e-39*t,r-15*t,17*t,54*t,m),y=c.rectangle(e-39*t,r+25*t,14*t,86*t,u),h=i.create({label:"CHEST_TO_RIGHT_UPPER",bodyA:g,pointA:{x:24*t,y:0},pointB:{x:0,y:-32*t},bodyB:x,stiffness:.8,angularStiffness:.2,length:0,render:{anchors:!1,visible:!1}}),v=i.create({label:"CHEST_TO_LEFT_UPPER",bodyA:g,pointA:{x:-24*t,y:0},pointB:{x:0,y:-32*t},bodyB:S,stiffness:.8,angularStiffness:.2,length:0,render:{anchors:!1,visible:!1}}),k=i.create({label:"UPPER_TO_LOWER_RIGHT",bodyA:x,bodyB:b,pointA:{x:0,y:20*t},pointB:{x:0,y:-36*t},stiffness:.6,angularStiffness:1.2,render:{visible:!0,anchors:!1},length:0}),A=i.create({label:"UPPER_TO_LOWER_LEFT",bodyA:S,bodyB:y,pointA:{x:0,y:20*t},pointB:{x:0,y:-36*t},stiffness:.6,angularStiffness:1.2,render:{visible:!0,anchors:!1},length:0});return d.create({bodies:[g,y,S,b,x],constraints:[A,k,v,h]})};