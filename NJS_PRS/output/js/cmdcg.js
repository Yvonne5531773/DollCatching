var DC=DC||{};DC["do"]=function(){function e(){window.requestAnimationFrame(e),r.update(C,5)}var r=Matter.Engine,a=Matter.Render,t=Matter.Runner,n=Matter.Body,c=Matter.Composite,o=Matter.Composites,d=Matter.Common,i=Matter.Constraint,l=Matter.MouseConstraint,m=Matter.Mouse,s=Matter.World,u=Matter.Events,g=Matter.Bodies,p=(Matter.Vertices,Matter.Svg,Matter.Query,Matter.Sleeping,CMDC.clearSource),f=CMDC.eventOff,S=CMDC.timeout,b=CMDC.bhObj,x=CMDC.playAgain,h=CMDC.sourceLinkRoot;DC["do"].createRagdoll=function(e,r,a,t,o){var l=.8;a="undefined"==typeof a?1:a;var m=d.extend({label:"chest",collisionFilter:{group:n.nextGroup(!0)},chamfer:{radius:[10*a,10*a,16*a,16*a]},render:{sprite:{xScale:.7,yScale:.7,texture:h+"img/chest.png"}},frictionAir:0},t),s=d.extend({label:"left-arm",collisionFilter:{group:n.nextGroup(!0)},chamfer:{radius:10*a},render:{fillStyle:"#bdbabb"},timeScale:l},t),u=d.extend({},s,{label:"left-lower-arm",render:{fillStyle:"#cfcdd2"},chamfer:{radius:6*a}}),p=d.extend({label:"right-arm",collisionFilter:{group:n.nextGroup(!0)},chamfer:{radius:10*a},render:{fillStyle:"#bdbabb"},timeScale:l},t),f=d.extend({},p,{label:"right-lower-arm",render:{fillStyle:"#cfcdd2"},chamfer:{radius:6*a}}),S=g.rectangle(e,r,45*a,30*a,m),b=g.rectangle(e+25*a,r-10*a,17*a,54*a,p),x=g.rectangle(e+25*a,r+20*a,14*a,86*a,f),y=g.rectangle(e-25*a,r-10*a,17*a,54*a,s),v=g.rectangle(e-25*a,r+20*a,14*a,86*a,u),A=i.create({label:"CHEST_TO_RIGHT_UPPER",bodyA:S,pointA:{x:24*a,y:0},pointB:{x:0,y:-32*a},bodyB:b,angularStiffness:.2,length:0,render:{anchors:!1,visible:!1}}),C=i.create({label:"CHEST_TO_LEFT_UPPER",bodyA:S,pointA:{x:-24*a,y:0},pointB:{x:0,y:-32*a},bodyB:y,angularStiffness:.2,length:0,render:{anchors:!1,visible:!1}}),M=i.create({label:"UPPER_TO_LOWER_RIGHT",bodyA:b,bodyB:x,pointA:{x:0,y:20*a},pointB:{x:0,y:-36*a},angularStiffness:1,render:{visible:!0,anchors:!1},length:0}),w=i.create({label:"UPPER_TO_LOWER_LEFT",bodyA:y,bodyB:v,pointA:{x:0,y:20*a},pointB:{x:0,y:-36*a},angularStiffness:1,render:{visible:!0,anchors:!1},length:0});return c.create({bodies:[S,v,y,x,b],constraints:[w,M,C,A]})},DC["do"].createStacks=function(e){var r=.1,a=.5;return o.stack(e.x,e.y,e.columns,e.rows,0,0,function(e,t){return d.random()<.05?g.rectangle(e+15*d.random(),t+15*d.random(),26,16,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:h+"img/double11_1.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.05&&d.random()<.1?g.rectangle(e+15*d.random(),t+30*d.random(),24,24,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:"//act.cmcmcdn.com/upload/201710/f8e6bdd1572a5e8a2e2f73d8c52b1bf6.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.1&&d.random()<.15?g.rectangle(e+15*d.random(),t+15*d.random(),22,30,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:h+"img/red.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.15&&d.random()<.2?g.rectangle(e+15*d.random(),t+15*d.random(),24,24,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:h+"img/gift.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.2&&d.random()<.25?g.circle(e+15*d.random(),t+5*d.random(),16,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:h+"img/coin.png"}},timeScale:a,mass:r}):d.random()>.25&&d.random()<.3?g.circle(e+15*d.random(),t+10*d.random(),12,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:h+"img/duck.png"}},timeScale:a,mass:r}):d.random()>.3&&d.random()<.35?g.circle(e+15*d.random(),t+5*d.random(),16,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:"//act.cmcmcdn.com/upload/201710/bd2bd1fb94a20ca2f9eea1088925050a.png"}},timeScale:a,mass:r}):d.random()>.35&&d.random()<.4?g.rectangle(e+15*d.random(),t+15*d.random(),28,38,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:"//act.cmcmcdn.com/upload/201710/24af186e46de0d872942ef2709f83b71.gif"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.4&&d.random()<.45?g.rectangle(e+15*d.random(),t+45*d.random(),38,18,{render:{sprite:{xScale:.5-A,yScale:.5-A,texture:"//act.cmcmcdn.com/upload/201710/2a126249ff498557a38cc920a64481c7.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.45&&d.random()<.5?g.rectangle(e+15*d.random(),t+40*d.random(),28,23,{render:{sprite:{xScale:.7-A,yScale:.7-A,texture:h+"img/10.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.5&&d.random()<.55?g.rectangle(e+15*d.random(),t+32*d.random(),38,23,{render:{sprite:{xScale:.7-A,yScale:.7-A,texture:h+"img/500.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.55&&d.random()<.6?g.rectangle(e+15*d.random(),t+44*d.random(),38,23,{render:{sprite:{xScale:.7-A,yScale:.7-A,texture:h+"/img/100.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.6&&d.random()<.65?g.rectangle(e+15*d.random(),t+21*d.random(),63,23,{render:{sprite:{xScale:.7-A,yScale:.7-A,texture:h+"/img/10000.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.65&&d.random()<.7?g.rectangle(e+15*d.random(),t+29*d.random(),28,23,{render:{sprite:{xScale:.7-A,yScale:.7-A,texture:h+"/img/50.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.7&&d.random()<.75?g.rectangle(e+15*d.random(),t+15*d.random(),28,28,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:"//act.cmcmcdn.com/upload/201710/25cd325bae7818e30a4d4676ec0880bf.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.75&&d.random()<.8?g.rectangle(e+15*d.random(),t+15*d.random(),28,28,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:"//act.cmcmcdn.com/upload/201710/c1fede413fbd7b3de23a771472e67d29.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.8&&d.random()<.85?g.rectangle(e+15*d.random(),t+15*d.random(),28,28,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:"//act.cmcmcdn.com/upload/201710/9de67782c268517089e6d031af85405c.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.85&&d.random()<.9?g.rectangle(e+15*d.random(),t+15*d.random(),28,28,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:"//act.cmcmcdn.com/upload/201710/45991158829180f3a86597a0ef781c3a.png"}},chamfer:{radius:5},timeScale:a,mass:r}):d.random()>.95&&d.random()<1?g.rectangle(e+15*d.random(),t+15*d.random(),28,28,{render:{sprite:{xScale:.8-A,yScale:.8-A,texture:"//act.cmcmcdn.com/upload/201710/328c7178f239ce35264850419510b3be.png"}},chamfer:{radius:5},timeScale:a,mass:r}):g.circle(e+15*d.random(),t+15*d.random(),16,{render:{sprite:{xScale:.7-A,yScale:.7-A,texture:h+"img/liebao.png"}},timeScale:a,mass:r})})};var y=!1,v=!1,A=.1,C=r.create({}),M=C.world,w=a.create({element:document.body,engine:C,options:{width:1180,height:document.documentElement.clientHeight,background:"transparent",showAngleIndicator:!1,wireframes:!1}}),k=t.create(),B={isStatic:!0,background:"transparent",render:{fillStyle:"#f84851"}},E=document.documentElement.clientWidth,D=10,R=.01;a.run(w),t.run(k,C),M.bodies=[],$("#cm-d-c").css("min-width",1180);g.rectangle(0,600,3*E,R,B),g.rectangle(0,0,3*E,R,B),g.rectangle(.13*-E+D,300,R,620,B),g.rectangle(.6*E+D,300,R,620,B);s.add(M,[g.rectangle(400,600+D,800.5+2*D,R,B),g.rectangle(800+D,300,R,600.5+2*D,B),g.rectangle(-D,300,R,600.5+2*D,B)]);var T,_=!1,F=function(){return _?(!x&&$("#cm-dc-switch1").prop("checked",!1),void(x&&$("#cm-dc-switch1").prop("checked",!0))):(v=!1,_=!0,q.stiffness=.005,q.length=300,void setTimeout(function(){J=!0,setTimeout(function(){q.length=10,setTimeout(function(){$(".simpleAlert").length>0||(T=simpleAlert({content:"游戏结束啦！",buttons:{"再玩一次":function(){L(C,!1),x=!0,$("#cm-dc-switch1").prop("checked",!0),T.close()},"退出":function(){p(),f=!0,T.close(),s.clear(M),$("#cm-d-c").remove(),b.dispose()}}}),L(C,!0))},3*S)},2.5*S)},S))};$(".start-btn").click(F);var O={x:0,y:400,columns:28,rows:2},P=DC["do"].createStacks(O);s.add(M,P),setTimeout(function(){s.add(M,[W,V,z]),$(".start-btn").css("display","block"),y=!0,setTimeout(function(){v=!0},S)},S);var L=function(e,r){for(var a=c.allBodies(e.world),t=0;t<a.length;t++){var o=a[t];o.position.y<=400&&!~["chest","left-arm","right-arm"].indexOf(o.label)&&n.setStatic(o,r)}},G=400,H=n.nextGroup(!0),U=-1,W=o.stack(G,0,2,1,0,10,function(e,r){return g.rectangle(e,r,30,15,{label:"component",collisionFilter:{group:H},chamfer:.5,render:{sprite:{xScale:.6,yScale:.6,texture:h+"img/component.png"}},frictionAirVal:0})}),I=g.rectangle(400,100,40,25,{label:"arm",render:{strokeStyle:"#3c3f41",sprite:{xScale:.8,yScale:.8,texture:h+"img/arm.png"}},frictionAirVal:0});W.bodies.push(I),o.chain(W,.5,0,-.5,0,{length:0,render:{visible:!1}}),c.add(W,i.create({label:"spring",bodyB:W.bodies[0],pointB:{x:-20,y:0},pointA:{x:W.bodies[0].position.x,y:W.bodies[0].position.y},stiffness:.009,damping:1,length:0,render:{visible:!0,lineWidth:1.5,strokeStyle:"#29a3f1"}}));var V,j=[],q=W.constraints[2];d.choose(["#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58"]);V=DC["do"].createRagdoll(400,100,1.1,{},j);var Q,z=i.create({bodyA:W.bodies[W.bodies.length-1],bodyB:V.bodies[0],pointA:{x:28,y:0},pointB:{x:0,y:-7},length:0,render:{visible:!1},stiffness:1}),J=!1,K=.5,N=-.5,X=3.5,Y=-3.5,Z=q.pointA.x;u.on(C,"beforeUpdate",function(e){if(!(!V||V.length<=0||f)&&(J?(x?(X+=.03,Y-=.03,K+=.01,N-=.01,X>=3.5&&(X=3.5,Y=-3.5),K>=.5&&(K=.5,N=-.5,J=!1,v=!0,x=!1,_=!1,q.stiffness=.009)):(X-=.02,Y+=.02,K-=.01,N+=.01,X<=1.2&&(X=1.2,Y=-1.2),K<=-.95&&(K=-.95,N=.95)),n.setAngle(V.bodies[1],K),n.setAngle(V.bodies[2],X),n.setAngle(V.bodies[3],N),n.setAngle(V.bodies[4],Y)):(n.setAngle(V.bodies[1],.5),n.setAngle(V.bodies[2],3.3),n.setAngle(V.bodies[3],-.5),n.setAngle(V.bodies[4],-3.3)),v)){if(U+=.015,U<0)return;Q=Z+200*Math.sin(U),_||(q.pointA.x=Q)}});var ee=m.create(w.canvas),re=l.create(C,{mouse:ee,constraint:{stiffness:.2,render:{visible:!1}}});return ee.element.removeEventListener("mousewheel",ee.mousewheel),ee.element.removeEventListener("DOMMouseScroll",ee.mousewheel),u.on(re,"mouseup",function(e){y&&($("#cm-dc-switch1").prop("checked",!1),F())}),w.mouse=ee,a.lookAt(w,{min:{x:0,y:0},max:{x:800,y:600}}),$(".cm-d-c-close").click(function(){p(),f=!0,s.clear(M),$("#cm-d-c").remove(),b.dispose()}),$("#cm-d-c").css({cursor:"url('https://www.duba.com/static/v2/images/point.cur'),auto"}),e(),{engine:C,runner:k,render:w,canvas:w.canvas,stop:function(){Matter.Render.stop(w),Matter.Runner.stop(k)}}};