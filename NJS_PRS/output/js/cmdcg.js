var cmdcAlert=function(e){var t={closeAll:!1,content:"",buttons:{}},o=$.extend(t,e),r={},n=$('<div class="simpleAlert">'),a=$('<div class="simpleAlertShelter">'),i=$('<div class="simpleAlertBody">'),l=$('<img class="simpleAlertBodyClose" height="14" width="14"/>');$('<p class="simpleAlertBodyContent">'+o.content+"</p>");return r.init=function(){for(var e=0,t=!1,r=[],l=0;l<2;l++)for(var d in o.buttons)switch(l){case 0:r.push(d);break;case 1:t=r.length<=1,e++;var s=$('<a class="simpleAlertBtn simpleAlertBtn'+e+'"></a>');s.bind("click",o.buttons[d]),i.bind("click",o.buttons[d]),i.append(s)}n.append(a).append(i),$("body").append(n),i.show().animate({marginTop:"35px",opacity:"1"},350)},l.bind("click",function(){o.closeAll=!1,r.close()}),r.close=function(){o.closeAll?$(".simpleAlert").remove():i.animate({marginTop:"-188px",opacity:"0"},200,function(){$(".simpleAlert").last().remove()})},r.init(),r},CMDCG=CMDCG||{};CMDCG["do"]=function(){function e(){CMDCG["do"].raf=window.requestAnimationFrame(e),t.update(D,1e3/300)}var t=Matter.Engine,o=Matter.Render,r=Matter.Runner,n=Matter.Body,a=Matter.Composite,i=Matter.Composites,l=Matter.Common,d=Matter.Constraint,s=Matter.MouseConstraint,c=Matter.Mouse,C=Matter.World,m=Matter.Events,u=Matter.Bodies,p=(Matter.Vertices,Matter.Svg,Matter.Query,Matter.Sleeping,CMDC.clearSource),M=CMDC.timeout,g=CMDC.playAgain,b=CMDC.sourceLinkRoot,f=CMDC.tmallLink;CMDCG["do"].disappearSTO={},CMDCG["do"].sto1={},CMDCG["do"].sto1p5={},CMDCG["do"].sto0p3={},CMDCG["do"].sto1p3={},CMDCG["do"].sto0p2={},CMDCG["do"].sto1p2={},CMDCG["do"].sto2={},CMDCG["do"].clicked=!1,CMDCG["do"].redAlertShow=!1,CMDCG["do"].ragdollMove=!1,CMDCG["do"].raf={},CMDCG["do"].engineCallback={},CMDCG["do"].alert={},CMDCG["do"].createRagdoll=function(e,t,o,r,i){var s=.8,c=.6;o="undefined"==typeof o?1:o;var C=l.extend({label:"chest",collisionFilter:{group:n.nextGroup(!0)},chamfer:{radius:[10*o,10*o,16*o,16*o]},render:{visible:!1},frictionAir:0},r),m=l.extend({label:"left-arm",collisionFilter:{group:n.nextGroup(!0)},chamfer:{radius:10*o},render:{fillStyle:"#bdbabb",visible:!1,sprite:{xScale:c,yScale:c,texture:b+"img/left-upper-arm.png"}},timeScale:s},r),p=l.extend({},m,{label:"left-lower-arm",render:{fillStyle:"#cfcdd2",visible:!1,sprite:{xScale:c,yScale:c,texture:b+"img/left-bottom-arm.png"}},chamfer:{radius:6*o}}),M=l.extend({label:"right-arm",collisionFilter:{group:n.nextGroup(!0)},chamfer:{radius:10*o},render:{fillStyle:"#bdbabb",visible:!1,sprite:{xScale:c,yScale:c,texture:b+"img/right-upper-arm.png"}},timeScale:s},r),g=l.extend({},M,{label:"right-lower-arm",render:{fillStyle:"#cfcdd2",visible:!1,sprite:{xScale:c,yScale:c,texture:b+"img/right-bottom-arm.png"}},chamfer:{radius:6*o}}),f=u.rectangle(e,t,70*o,25*o,C),D=u.rectangle(e+45*o,t-10*o,17*o,54*o,M),G=u.rectangle(e+45*o,t+20*o,14*o,86*o,g),h=u.rectangle(e-45*o,t-10*o,17*o,54*o,m),v=u.rectangle(e-45*o,t+20*o,14*o,86*o,p),S=d.create({label:"CHEST_TO_RIGHT_UPPER",bodyA:f,pointA:{x:24*o,y:0},pointB:{x:-5,y:-45*o},bodyB:D,angularStiffness:.4,length:0,render:{anchors:!1,visible:!1}}),y=d.create({label:"CHEST_TO_LEFT_UPPER",bodyA:f,pointA:{x:-24*o,y:0},pointB:{x:5,y:-45*o},bodyB:h,angularStiffness:.4,length:0,render:{anchors:!1,visible:!1}}),x=d.create({label:"UPPER_TO_LOWER_RIGHT",bodyA:D,bodyB:G,pointA:{x:0,y:20*o},pointB:{x:-8,y:-38*o},angularStiffness:1,render:{visible:!1,anchors:!1},length:0}),A=d.create({label:"UPPER_TO_LOWER_LEFT",bodyA:h,bodyB:v,pointA:{x:0,y:20*o},pointB:{x:8,y:-38*o},angularStiffness:1,render:{visible:!1,anchors:!1},length:0});return a.create({bodies:[f,v,h,G,D],constraints:[A,x,y,S]})},CMDCG["do"].createStacks=function(e){var t=.05,o=.6,r=15,n=.65,a="stack";return i.stack(e.x,e.y,e.columns,e.rows,0,0,function(e,i){return l.random()<.3?u.rectangle(e+25*l.random(),i+5*l.random(),36,46,{label:a,render:{sprite:{xScale:n,yScale:n,texture:b+"img/rred.png"}},chamfer:{radius:r},timeScale:o,mass:t,angle:-Math.PI*l.random(0,1)}):l.random()>.3&&l.random()<.6?u.rectangle(e+25*l.random(),i+l.random(),36,46,{label:a,render:{sprite:{xScale:n,yScale:n,texture:b+"img/pred.png"}},chamfer:{radius:r},timeScale:o,mass:t,angle:-Math.PI*l.random(0,1)}):l.random()>.6&&l.random()<.65?u.rectangle(e+25*l.random(),i+15*l.random(),30,40,{label:a,render:{sprite:{xScale:n,yScale:n,texture:b+"img/ggift.png"}},chamfer:{radius:r},timeScale:o,mass:t,angle:-Math.PI*l.random(0,1)}):l.random()>.65&&l.random()<.7?u.rectangle(e+25*l.random(),i+15*l.random(),30,40,{label:a,render:{sprite:{xScale:n,yScale:n,texture:b+"img/pgift.png"}},chamfer:{radius:r},timeScale:o,mass:t,angle:-Math.PI*l.random(0,1)}):l.random()>.7&&l.random()<.75?u.rectangle(e+25*l.random(),i+4*l.random(),30,40,{label:a,render:{sprite:{xScale:n,yScale:n,texture:b+"img/bgift.png"}},chamfer:{radius:r},timeScale:o,mass:t,angle:-Math.PI*l.random(0,1)}):l.random()>.75&&l.random()<.8?u.rectangle(e+25*l.random(),i+4*l.random(),30,44,{label:a,render:{sprite:{xScale:n,yScale:n,texture:b+"img/obag.png"}},chamfer:{radius:r},timeScale:o,mass:t,angle:-Math.PI*l.random(0,1)}):l.random()>.8&&l.random()<.85?u.rectangle(e+25*l.random(),i+3*l.random(),30,44,{label:a,render:{sprite:{xScale:n,yScale:n,texture:b+"img/pbag.png"}},chamfer:{radius:r},timeScale:o,mass:t,angle:-Math.PI*l.random(0,1)}):l.random()>.85&&l.random()<.9?u.rectangle(e+25*l.random(),i+44*l.random(),30,44,{label:a,render:{sprite:{xScale:n,yScale:n,texture:b+"/img/rbag.png"}},chamfer:{radius:r},timeScale:o,mass:t,angle:-Math.PI*l.random(0,1)}):u.rectangle(e+25*l.random(),i+4*l.random(),30,44,{label:a,render:{sprite:{xScale:n,yScale:n,texture:b+"/img/rred.png"}},chamfer:{radius:r},timeScale:o,mass:t,angle:-Math.PI*l.random(0,1)})})},CMDCG["do"].setVisible=function(){O.render.visible=!0;for(var e=0;e<I.bodies.length;e++)I.bodies[e].render.visible=!0;for(var t=0;t<P.bodies.length;t++){var o=P.bodies[t];"chest"!==o.label&&(o.render.visible=!0)}},CMDCG["do"].openNewWindow=function(e,t){var o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("target","blank"),o.setAttribute("id",t),document.getElementById(t)||document.body.appendChild(o),o.click()},CMDCG["do"].clickFun=function(e){if(!CMDCG["do"].clicked&&CMDCG["do"].ragdollMove){CMDCG["do"].ragdollMove=!1,CMDCG["do"].clicked=!0,O.stiffness=.005;var t=setInterval(function(){O.length>=200&&clearInterval(t),O.length+=30},80);CMDCG["do"].sto1=setTimeout(function(){L=!0,CMDCG["do"].sto1p5=setTimeout(function(){O.length=20,CMDCG["do"].sto1p3=setTimeout(function(){$(".simpleAlert").length>0||(CMDCG["do"].redAlertShow=!0,CMDCG["do"].alert=cmdcAlert({buttons:{gotmall:function(){window.open(f),CMDCG["do"].closeFun("receive"),CMDC.Interface.reportClick("click",4,1)}}}),CMDCG["do"].setBodiesStatic(D,!0))},1.3*M)},1.5*M)},M),CMDC.Interface.reportClick("click",e)}},CMDCG["do"].closeFun=function(e,t){CMDCG["do"].disappearSTO&&clearTimeout(CMDCG["do"].disappearSTO),CMDCG["do"].sto1&&clearTimeout(CMDCG["do"].sto1),CMDCG["do"].sto1p5&&clearTimeout(CMDCG["do"].sto1p5),CMDCG["do"].sto0p3&&clearTimeout(CMDCG["do"].sto0p3),CMDCG["do"].sto1p3&&clearTimeout(CMDCG["do"].sto1p3),CMDCG["do"].sto0p2&&clearTimeout(CMDCG["do"].sto0p2),CMDCG["do"].sto1p2&&clearTimeout(CMDCG["do"].sto1p2),CMDCG["do"].sto2&&clearTimeout(CMDCG["do"].sto2),cancelAnimationFrame(CMDCG["do"].raf),setTimeout(function(){m.off(D,"beforeUpdate",CMDCG["do"].engineCallback)},M),$("body").css("overflow-y","auto"),window.scrollTo(255,0),p(),C.clear(G),$("#cm-d-c").remove(),$(".cm-dc-class").remove(),$("#cm-d-c-style").remove(),$(".simpleAlert").remove(),CMDCG["do"].unbindEvents(),CMDCG["do"].alert&&CMDCG["do"].alert.close(),CMDC.Interface.close(e,t)},CMDCG["do"].bindEvents=function(){$(".cm-dc-middle").bind("click mouseover mouseout",function(e){"mouseover"===e.type?CMDCG["do"].disappearSTO&&clearTimeout(CMDCG["do"].disappearSTO):"mouseout"===e.type?CMDCG["do"].disappear():"click"===e.type&&CMDCG["do"].clickFun(1)}),$(".cm-dc-start-btn").bind("click mouseover mouseout",function(){"mouseover"===event.type?CMDCG["do"].disappearSTO&&clearTimeout(CMDCG["do"].disappearSTO):"mouseout"===event.type?CMDCG["do"].disappear():"click"===event.type&&CMDCG["do"].clickFun(2)}),$(".cm-dc-close").bind("click",function(){!CMDCG["do"].redAlertShow&&CMDCG["do"].closeFun("exit",1),CMDCG["do"].redAlertShow&&CMDCG["do"].closeFun("exit",2)})},CMDCG["do"].unbindEvents=function(){$(".cm-dc-middle").unbind("click mouseover mouseout"),$(".cm-dc-start-btn").unbind("click mouseover mouseout"),$(".cm-dc-close").unbind("click")},CMDCG["do"].setBodiesStatic=function(e,t){for(var o,r=a.allBodies(e.world),i=!1,l=0;l<r.length;l++)o=r[l],o.position.y<=400&&!~["chest","left-arm","right-arm"].indexOf(o.label)&&("stack"===o.label&&(i=!0),n.setStatic(o,t));i&&CMDC.Interface.reportClick("click",3)},CMDCG["do"].disappear=function(){CMDCG["do"].disappearSTO=setTimeout(function(){!CMDCG["do"].clicked&&CMDCG["do"].closeFun("disappear")},20*M)},CMDCG["do"].disappear();var D=t.create({}),G=D.world,h=o.create({element:document.body,engine:D,options:{width:1180,height:document.documentElement.clientHeight,background:"transparent",showAngleIndicator:!1,wireframes:!1}}),v=r.create(),S={isStatic:!0,background:"transparent",render:{fillStyle:"#f84851"}},y=10,x=.01;o.run(h),r.run(v,D),G.bodies=[],$("#cm-d-c").css("min-width",1180),C.add(G,[u.rectangle(400,470+y,800.5+2*y,x,S),u.rectangle(800+y,300,x,600.5+2*y,S),u.rectangle(-y,300,x,600.5+2*y,S)]);var A={x:5,y:300,columns:24,rows:1},k=CMDCG["do"].createStacks(A);C.add(G,k),CMDCG["do"].sto0p2=setTimeout(function(){C.add(G,[P,_,I]),CMDCG["do"].sto1p2=setTimeout(function(){CMDCG["do"].setVisible()},1.2*M),CMDCG["do"].sto2=setTimeout(function(){CMDCG["do"].ragdollMove=!0},2*M)},.2*M);var T=400,w=n.nextGroup(!0),B=-1,I=i.stack(T,38,1,1,0,10,function(e,t){return u.rectangle(e,t,25,15,{label:"component",collisionFilter:{group:w},chamfer:.5,render:{visible:!1,sprite:{xScale:.66,yScale:.66,texture:b+"img/connect.png"}}})}),E=u.rectangle(T,100,35,55,{label:"arm",render:{visible:!1,sprite:{xScale:.66,yScale:.66,texture:b+"img/chest.png"}}});I.bodies.push(E),i.chain(I,.5,0,-.5,0,{length:0,render:{visible:!1}}),a.add(I,d.create({label:"spring",bodyB:I.bodies[0],pointB:{x:-5,y:0},pointA:{x:I.bodies[0].position.x,y:I.bodies[0].position.y},stiffness:.009,damping:1,length:0,render:{visible:!1,lineWidth:4,strokeStyle:"#3442c7"}}));var P,F=[],O=I.constraints[1];P=CMDCG["do"].createRagdoll(400,100,1.1,{},F);var R,_=d.create({bodyA:I.bodies[I.bodies.length-1],bodyB:P.bodies[0],pointA:{x:28,y:0},pointB:{x:0,y:-5},length:0,render:{visible:!1},stiffness:1}),L=!1,U=.5,H=-.5,W=2,V=-2,q=O.pointA.x;CMDCG["do"].engineCallback=m.on(D,"beforeUpdate",function(e){if(P&&!(P.length<=0)&&(L?(g?(W+=.03,V-=.03,U+=.01,H-=.01,W>=2&&(W=2,V=-2),U>=.5&&(U=.5,H=-.5,L=!1,CMDCG["do"].ragdollMove=!0,g=!1,O.stiffness=.009)):(W-=.02,V+=.02,U-=.01,H+=.01,W<=.75&&(W=.75,V=-.75),U<=-.95&&(U=-.95,H=.95)),n.setAngle(P.bodies[1],U),n.setAngle(P.bodies[2],W),n.setAngle(P.bodies[3],H),n.setAngle(P.bodies[4],V)):(n.setAngle(P.bodies[1],.5),n.setAngle(P.bodies[2],2.2),n.setAngle(P.bodies[3],-.5),n.setAngle(P.bodies[4],-2.2)),CMDCG["do"].ragdollMove)){if(B+=.012,B<0)return;R=q+200*Math.sin(B),CMDCG["do"].clicked||(O.pointA.x=R)}});var N=c.create(h.canvas);s.create(D,{mouse:N,constraint:{stiffness:.2,render:{visible:!1}}});return h.mouse=N,o.lookAt(h,{min:{x:0,y:0},max:{x:800,y:600}}),e(),CMDCG["do"].bindEvents(),CMDC.Interface.reportShow("winpop"),{engine:D,runner:v,render:h,canvas:h.canvas,stop:function(){Matter.Render.stop(h),Matter.Runner.stop(v)}}};