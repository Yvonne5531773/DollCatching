!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.decomp=n()}}(function(){return function n(r,e,t){function u(o,i){if(!e[o]){if(!r[o]){var a="function"==typeof require&&require;if(!i&&a)return a(o,!0);if(f)return f(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=e[o]={exports:{}};r[o][0].call(l.exports,function(n){var e=r[o][1][n];return u(e?e:n)},l,l.exports,n,r,e,t)}return e[o].exports}for(var f="function"==typeof require&&require,o=0;o<t.length;o++)u(t[o]);return u}({1:[function(n,r,e){function t(n,r,e){e=e||0;var t,u,f,o,i,a,l,h=[0,0];return t=n[1][1]-n[0][1],u=n[0][0]-n[1][0],f=t*n[0][0]+u*n[0][1],o=r[1][1]-r[0][1],i=r[0][0]-r[1][0],a=o*r[0][0]+i*r[0][1],l=t*i-o*u,E(l,0,e)||(h[0]=(i*f-u*a)/l,h[1]=(t*a-o*f)/l),h}function u(n,r,e,t){var u=r[0]-n[0],f=r[1]-n[1],o=t[0]-e[0],i=t[1]-e[1];if(o*f-i*u===0)return!1;var a=(u*(e[1]-n[1])+f*(n[0]-e[0]))/(o*f-i*u),l=(o*(n[1]-e[1])+i*(e[0]-n[0]))/(i*u-o*f);return a>=0&&a<=1&&l>=0&&l<=1}function f(n,r,e){return(r[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(r[1]-n[1])}function o(n,r,e){return f(n,r,e)>0}function i(n,r,e){return f(n,r,e)>=0}function a(n,r,e){return f(n,r,e)<0}function l(n,r,e){return f(n,r,e)<=0}function h(n,r,e,t){if(t){var u=L,o=N;u[0]=r[0]-n[0],u[1]=r[1]-n[1],o[0]=e[0]-r[0],o[1]=e[1]-r[1];var i=u[0]*o[0]+u[1]*o[1],a=Math.sqrt(u[0]*u[0]+u[1]*u[1]),l=Math.sqrt(o[0]*o[0]+o[1]*o[1]),h=Math.acos(i/(a*l));return h<t}return 0===f(n,r,e)}function c(n,r){var e=r[0]-n[0],t=r[1]-n[1];return e*e+t*t}function v(n,r){var e=n.length;return n[r<0?r%e+e:r%e]}function p(n){n.length=0}function s(n,r,e,t){for(var u=e;u<t;u++)n.push(r[u])}function g(n){for(var r=0,e=n,t=1;t<n.length;++t)(e[t][1]<e[r][1]||e[t][1]===e[r][1]&&e[t][0]>e[r][0])&&(r=t);o(v(n,r-1),v(n,r),v(n,r+1))||d(n)}function d(n){for(var r=[],e=n.length,t=0;t!==e;t++)r.push(n.pop());for(var t=0;t!==e;t++)n[t]=r[t]}function m(n,r){return a(v(n,r-1),v(n,r),v(n,r+1))}function y(n,r,e){var u,f,o=U,a=V;if(i(v(n,r+1),v(n,r),v(n,e))&&l(v(n,r-1),v(n,r),v(n,e)))return!1;f=c(v(n,r),v(n,e));for(var h=0;h!==n.length;++h)if((h+1)%n.length!==r&&h!==r&&i(v(n,r),v(n,e),v(n,h+1))&&l(v(n,r),v(n,e),v(n,h))&&(o[0]=v(n,r),o[1]=v(n,e),a[0]=v(n,h),a[1]=v(n,h+1),u=t(o,a),c(v(n,r),u)<f))return!1;return!0}function x(n,r,e,t){var u=t||[];if(p(u),r<e)for(var f=r;f<=e;f++)u.push(n[f]);else{for(var f=0;f<=e;f++)u.push(n[f]);for(var f=r;f<n.length;f++)u.push(n[f])}return u}function A(n){for(var r=[],e=[],t=[],u=[],f=Number.MAX_VALUE,o=0;o<n.length;++o)if(m(n,o))for(var i=0;i<n.length;++i)if(y(n,o,i)){e=A(x(n,o,i,u)),t=A(x(n,i,o,u));for(var a=0;a<t.length;a++)e.push(t[a]);e.length<f&&(r=e,f=e.length,r.push([v(n,o),v(n,i)]))}return r}function b(n){var r=A(n);return r.length>0?q(n,r):[n]}function q(n,r){if(0===r.length)return[n];if(r instanceof Array&&r.length&&r[0]instanceof Array&&2===r[0].length&&r[0][0]instanceof Array){for(var e=[n],t=0;t<r.length;t++)for(var u=r[t],f=0;f<e.length;f++){var o=e[f],i=q(o,u);if(i){e.splice(f,1),e.push(i[0],i[1]);break}}return e}var u=r,t=n.indexOf(u[0]),f=n.indexOf(u[1]);return t!==-1&&f!==-1&&[x(n,t,f),x(n,f,t)]}function w(n){var r,e=n;for(r=0;r<e.length-1;r++)for(var t=0;t<r-1;t++)if(u(e[r],e[r+1],e[t],e[t+1]))return!1;for(r=1;r<e.length-2;r++)if(u(e[0],e[e.length-1],e[r],e[r+1]))return!1;return!0}function M(n,r,e,t,u){u=u||0;var f=r[1]-n[1],o=n[0]-r[0],i=f*n[0]+o*n[1],a=t[1]-e[1],l=e[0]-t[0],h=a*e[0]+l*e[1],c=f*l-a*o;return E(c,0,u)?[0,0]:[(l*i-o*h)/c,(f*h-a*i)/c]}function k(n,r,e,t,u,f,h){f=f||100,h=h||0,u=u||25,r="undefined"!=typeof r?r:[],e=e||[],t=t||[];var p=[0,0],g=[0,0],d=[0,0],y=0,x=0,A=0,b=0,q=0,w=0,C=0,E=[],L=[],N=n,U=n;if(U.length<3)return r;if(h++,h>f)return console.warn("quickDecomp: max level ("+f+") reached."),r;for(var V=0;V<n.length;++V)if(m(N,V)){e.push(N[V]),y=x=Number.MAX_VALUE;for(var X=0;X<n.length;++X)o(v(N,V-1),v(N,V),v(N,X))&&l(v(N,V-1),v(N,V),v(N,X-1))&&(d=M(v(N,V-1),v(N,V),v(N,X),v(N,X-1)),a(v(N,V+1),v(N,V),d)&&(A=c(N[V],d),A<x&&(x=A,g=d,w=X))),o(v(N,V+1),v(N,V),v(N,X+1))&&l(v(N,V+1),v(N,V),v(N,X))&&(d=M(v(N,V+1),v(N,V),v(N,X),v(N,X+1)),o(v(N,V-1),v(N,V),d)&&(A=c(N[V],d),A<y&&(y=A,p=d,q=X)));if(w===(q+1)%n.length)d[0]=(g[0]+p[0])/2,d[1]=(g[1]+p[1])/2,t.push(d),V<q?(s(E,N,V,q+1),E.push(d),L.push(d),0!==w&&s(L,N,w,N.length),s(L,N,0,V+1)):(0!==V&&s(E,N,V,N.length),s(E,N,0,q+1),E.push(d),L.push(d),s(L,N,w,V+1));else{if(w>q&&(q+=n.length),b=Number.MAX_VALUE,q<w)return r;for(var X=w;X<=q;++X)i(v(N,V-1),v(N,V),v(N,X))&&l(v(N,V+1),v(N,V),v(N,X))&&(A=c(v(N,V),v(N,X)),A<b&&(b=A,C=X%n.length));V<C?(s(E,N,V,C+1),0!==C&&s(L,N,C,U.length),s(L,N,0,V+1)):(0!==V&&s(E,N,V,U.length),s(E,N,0,C+1),s(L,N,C,V+1))}return E.length<L.length?(k(E,r,e,t,u,f,h),k(L,r,e,t,u,f,h)):(k(L,r,e,t,u,f,h),k(E,r,e,t,u,f,h)),r}return r.push(n),r}function C(n,r){for(var e=0,t=n.length-1;n.length>3&&t>=0;--t)h(v(n,t-1),v(n,t),v(n,t+1),r)&&(n.splice(t%n.length,1),e++);return e}function E(n,r,e){return e=e||0,Math.abs(n-r)<e}r.exports={decomp:b,quickDecomp:k,isSimple:w,removeCollinearPoints:C,makeCCW:g};var L=[],N=[],U=[],V=[]},{}]},{},[1])(1)});